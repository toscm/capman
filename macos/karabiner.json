{
  "profiles": [
    {
      "name": "Default profile",
      "selected": true,
      "virtual_hid_keyboard": {"keyboard_type_v2":"ansi"},
      "complex_modifications": {
        "rules": [
          {
            "description": "Capman a",
            "manipulators": [
              {
                "conditions": [{"type":"variable_unless","name":"mode","value":0}],
                "from": {"key_code":"a"},
                "to": [
                  {"set_variable":{"name":"mode","value":0}},
                  {"shell_command":"\"/Library/Application Support/org.pqrs/Karabiner-Elements/bin/karabiner_cli\" --hide_notification_window"},
                  {"set_notification_message":{"id":"capman.mode","text":""}}
                ],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman b",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"b","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"b", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow","modifiers":["option","shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"b","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman c",
            "manipulators": [
              {
                "from": {"key_code":"c"},
                "to": [{"key_code":"caps_lock"}],
                "type": "basic",
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}]
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"c"},
                "to": [{"key_code":"caps_lock"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman caps_lock",
            "manipulators": [
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"key_code":"caps_lock","modifiers":{"optional":["any"]}},
                "to": [{"set_variable":{"name":"capslock_pressed","value":1}}],
                "to_after_key_up": [{"set_variable":{"name":"capslock_pressed","value":0}}],
                "to_if_alone": [
                  {"set_variable":{"name":"mode","value":0}},
                  {"shell_command":"\"/Library/Application Support/org.pqrs/Karabiner-Elements/bin/karabiner_cli\" --hide_notification_window"},
                  {"set_notification_message":{"id":"capman.mode","text":""}}
                ],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":1}],
                "from": {"key_code":"caps_lock","modifiers":{"optional":["any"]}},
                "to": [{"set_variable":{"name":"capslock_pressed","value":1}}],
                "to_after_key_up": [{"set_variable":{"name":"capslock_pressed","value":0}}],
                "to_if_alone": [
                  {"set_variable":{"name":"mode","value":1}},
                  {"shell_command":"\"/Library/Application Support/org.pqrs/Karabiner-Elements/bin/karabiner_cli\" --show_notification_window"},
                  {"set_notification_message":{"id":"capman.mode","text":"NORMAL"}}
                ],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"caps_lock","modifiers":{"optional":["any"]}},
                "to": [{"set_variable":{"name":"capslock_pressed","value":1}}],
                "to_after_key_up": [{"set_variable":{"name":"capslock_pressed","value":0}}],
                "to_if_alone": [
                  {"set_variable":{"name":"mode","value":0}},
                  {"shell_command":"\"/Library/Application Support/org.pqrs/Karabiner-Elements/bin/karabiner_cli\" --hide_notification_window"},
                  {"set_notification_message":{"id":"capman.mode","text":""}}
                ],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman d",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"d"},
                "to": [{"key_code":"delete_forward"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"d"},
                "to": [{"key_code":"delete_or_backspace"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"d"},
                "to": [{"key_code":"delete_forward"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"d"},
                "to": [{"key_code":"delete_or_backspace"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman down",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"down_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"down_arrow"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"key_code":"down_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"down_arrow","modifiers":["control","option"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"down_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"down_arrow","modifiers":["shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"down_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"down_arrow"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman e",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"e","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"e","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow","modifiers":["command","shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"e","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow","modifiers":["command"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Home/End Support",
            "manipulators": [
              {
                "from": {"key_code":"end"},
                "to": [{"key_code":"right_arrow","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "from": {"key_code":"end","modifiers":{"mandatory":["shift"]}},
                "to": [{"key_code":"right_arrow","modifiers":["command","shift"]}],
                "type": "basic"
              },
              {
                "from": {"key_code":"end","modifiers":{"mandatory":["command"]}},
                "to": [{"key_code":"down_arrow","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "from": {"key_code":"end","modifiers":{"mandatory":["command","shift"]}},
                "to": [{"key_code":"down_arrow","modifiers":["command","shift"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman f",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"f"},
                "to": [{"key_code":"f","modifiers":["option", "shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"key_code":"f"},
                "to": [{"key_code":"return_or_enter","modifiers":["control","option"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"f"},
                "to": [{"key_code":"f","modifiers":["option", "shift"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman h",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"h","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"h","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow","modifiers":["command","shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"h","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow","modifiers":["command"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Home/End Support",
            "manipulators": [
              {
                "from": {"key_code":"home"},
                "to": [{"key_code":"left_arrow","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "from": {"key_code":"home","modifiers":{"mandatory":["command"]}},
                "to": [{"key_code":"up_arrow","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "from": {"key_code":"home","modifiers":{"mandatory":["shift"]}},
                "to": [{"key_code":"left_arrow","modifiers":["command","shift"]}],
                "type": "basic"
              },
              {
                "from": {"key_code":"home","modifiers":{"mandatory":["command","shift"]}},
                "to": [{"key_code":"up_arrow","modifiers":["command","shift"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman i",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"i","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"up_arrow"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"key_code":"i","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"up_arrow","modifiers":["control","option"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"i","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"up_arrow","modifiers":["shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"i","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"up_arrow"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman j",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"j","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"key_code":"j","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow","modifiers":["control","option"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"j","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow","modifiers":["shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"j","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman k",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"k","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"down_arrow"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"key_code":"k","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"down_arrow","modifiers":["control","option"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"k","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"down_arrow","modifiers":["shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"k","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"down_arrow"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman l",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"l","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"key_code":"l","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow","modifiers":["control","option"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"l","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow","modifiers":["shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"l","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman left",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"left_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"key_code":"left_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow","modifiers":["control","option"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"left_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow","modifiers":["shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"left_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"left_arrow"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman m",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"m"},
                "to": [],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"m"},
                "to": [],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman n",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"n","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"tab","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"n","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"tab","modifiers":["command"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman o",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"o", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"down_arrow","modifiers":["left_command"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"o", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"down_arrow","modifiers":["left_command"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman p",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"p", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"v","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"p", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"v","modifiers":["command"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman q",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"q", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"escape"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"q", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"escape"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman r",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"r", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"z","modifiers":["command","shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"r", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"z","modifiers":["command","shift"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman right",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"right_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"key_code":"right_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow","modifiers":["control","option"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"right_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow","modifiers":["shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"right_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman s",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"s"},
                "to": [{"key_code":"delete_or_backspace"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"s"},
                "to": [{"key_code":"delete_or_backspace"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman spacebar",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"spacebar"},
                "to": [
                  {"set_variable":{"name":"mode","value":3}},
                  {"shell_command":"\"/Library/Application Support/org.pqrs/Karabiner-Elements/bin/karabiner_cli\" --show_notification_window"},
                  {"set_notification_message":{"id":"capman.mode","text":"WINDOW"}}
                ],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"key_code":"spacebar"},
                "to": [
                  {"set_variable":{"name":"mode","value":0}},
                  {"shell_command":"\"/Library/Application Support/org.pqrs/Karabiner-Elements/bin/karabiner_cli\" --hide_notification_window"},
                  {"set_notification_message":{"id":"capman.mode","text":""}}
                ],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman t",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"t", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"up_arrow","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"t", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"up_arrow","modifiers":["command"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman u",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"u", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"z","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"u", "modifiers":{"optional":["any"]}},
                "to": [{"key_code":"z","modifiers":["command"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Umlaute via Option",
            "manipulators": [
              {
                "from": {"key_code":"a","modifiers":{"mandatory":["option"]}},
                "to": [{"key_code":"u","modifiers":["option"]},{"key_code":"a"}],
                "type": "basic"
              },
              {
                "from": {"key_code":"o","modifiers":{"mandatory":["option"]}},
                "to": [{"key_code":"u","modifiers":["option"]},{"key_code":"o"}],
                "type": "basic"
              },
              {
                "from": {"key_code":"u","modifiers":{"mandatory":["option"]}},
                "to": [{"key_code":"u","modifiers":["option"]},{"key_code":"u"}],
                "type": "basic"
              },
              {
                "from": {"key_code":"a","modifiers":{"mandatory":["shift","option"]}},
                "to": [{"key_code":"u","modifiers":["option"]},{"key_code":"a","modifiers":["shift"]}],
                "type": "basic"
              },
              {
                "from": {"key_code":"o","modifiers":{"mandatory":["shift","option"]}},
                "to": [{"key_code":"u","modifiers":["option"]},{"key_code":"o","modifiers":["shift"]}],
                "type": "basic"
              },
              {
                "from": {"key_code":"u","modifiers":{"mandatory":["shift","option"]}},
                "to": [{"key_code":"u","modifiers":["option"]},{"key_code":"u","modifiers":["shift"]}],
                "type": "basic"
              },
              {
                "from": {"key_code":"s","modifiers":{"mandatory":["shift","option"]}},
                "to": [{"key_code":"s","modifiers":["option"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman up",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"up_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"up_arrow"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"key_code":"up_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"up_arrow","modifiers":["control","option"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"up_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"up_arrow","modifiers":["shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"up_arrow","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"up_arrow"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman v",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"v"},
                "to": [
                  {"set_variable":{"name":"mode","value":2}},
                  {"shell_command":"\"/Library/Application Support/org.pqrs/Karabiner-Elements/bin/karabiner_cli\" --show_notification_window"},
                  {"set_notification_message":{"id":"capman.mode","text":"VISUAL"}}
                ],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"v"},
                "to": [
                  {"set_variable":{"name":"mode","value":1}},
                  {"shell_command":"\"/Library/Application Support/org.pqrs/Karabiner-Elements/bin/karabiner_cli\" --show_notification_window"},
                  {"set_notification_message":{"id":"capman.mode","text":"NORMAL"}}
                ],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"v"},
                "to": [
                  {"set_variable":{"name":"mode","value":2}},
                  {"shell_command":"\"/Library/Application Support/org.pqrs/Karabiner-Elements/bin/karabiner_cli\" --show_notification_window"},
                  {"set_notification_message":{"id":"capman.mode","text":"VISUAL"}}
                ],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman w",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"w","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow","modifiers":["option"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":2}],
                "from": {"key_code":"w","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow","modifiers":["option","shift"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_if","value":1}],
                "from": {"key_code":"w","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"right_arrow","modifiers":["option"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman x",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"x","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"x","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"x","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"x","modifiers":["command"]}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman y",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"y","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"c","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"y","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"c","modifiers":["command"]}],
                "type": "basic"
              },
              {
                "type": "basic",
                "from": {"key_code":"y","modifiers":{"mandatory":["command"]}},
                "to": [{"key_code":"z","modifiers":["command","shift"]}]
              }
            ]
          },
          {
            "description": "Capman z",
            "manipulators": [
              {
                "conditions": [{"name":"capslock_pressed","type":"variable_if","value":1}],
                "from": {"key_code":"z","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"vk_none"}],
                "type": "basic"
              },
              {
                "conditions": [{"name":"mode","type":"variable_unless","value":0}],
                "from": {"key_code":"z","modifiers":{"optional":["any"]}},
                "to": [{"key_code":"vk_none"}],
                "type": "basic"
              }
            ]
          },
          {
            "description": "Capman window fallback",
            "manipulators": [
              {
                "conditions": [{"name":"mode","type":"variable_if","value":3}],
                "from": {"any":"key_code"},
                "to": [],
                "type": "basic"
              }
            ]
          }
        ]
      }
    }
  ]
}
